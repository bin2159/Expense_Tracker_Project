const express=require('express')
const bodyParser=require('body-parser')
const Sequelize=require('./util/database')
const enter=require('./routes/enter')
const expense=require('./routes/expense')
const User=require('./model/user')
const Expense=require('./model/expense')
const payment=require('./routes/payment')
const premium=require('./routes/premium')
const cors=require('cors')
const Order = require('./model/order')
const app=express()
app.use(cors())
app.use(bodyParser.json({extended:false}))
app.use('/user',enter)
app.use('/expense',expense)
app.use('/purchase',payment)
app.use('/premium',premium)
User.hasMany(Expense)
Expense.belongsTo(User)

User.hasMany(Order)
Order.belongsTo(User)
Sequelize
.sync()
.then(()=>{
    app.listen(4000)
})
.catch(err=>{
    console.log(err)
})